# KWT okg 规范（草案）  

## 介绍  

okg 是 eternalOS 的包管理器。它的最大特点是不管理依赖。  

如果你还不知道 eternalOS 是什么的话，它是一个较为激进（？）的，源码驱动的发行版。这意味着基本上所有软件包都需要你手动编译。okg 就是帮助用户去编译并打包软件包的包管理器。

编者注：如果觉得手动编译太慢的话，去看一看 Flatpak 有没有你需要的东西吧

## 用法

okg 没有直接的“中央软件包仓库”。它从 OKG_PATH 中读取拉取的本地软件包仓库的地址。  
如果 OKG_PATH 不存在，那么它会去读 `/etc/okg/pkgs` 。读不到则会报错。  
第一次设置 okg 的方法就是 git clone 一下官方的软件包仓库到上述目录中，或者随便扔一个目录里（记得指定 OKG_PATH！）  
我们一般推荐使用 Git 管理 OKG_PATH 指向的那个文件夹，所以，okg 并不会去尝试读取目录下的 `.git` 文件夹。okg 并不会自动同步本地软件包仓库，所以 OKG_PATH 需要用户自己去管理。  

详细可用命令如下：

```Usage
build - 构建一个来自 OKG_PATH 的软件包
build-file - 构建一个软件包描述文件
install - 安装一个或多个软件包
remove - 卸载一个或多个已经安装的软件包
upgrade - 升级一个或多个软件包
verify - 检查当前已安装的软件包是否满足某个软件包描述文件的依赖需求（Requires 字段）
clean - 清除构建缓存

--net - 使本次的构建可以连接网络
--nonet - 使本次的构建不可以连接网络
```

## 构建环境  

okg 的软件包构建环境是一个 chroot 环境。如果是使用 build 启动的环境，那么该环境能够联网（目的是下载源码包）。但是如果是 build-file 启动的环境，则该环境不能联网。

## 软件包组机制

okg 自己有一个独占的软件包组，此软件包组不能被用户使用。它就是 `@world` ，用来指代当前系统中所有已经安装的软件包。  
用户可以自定义软件包组，方法是在 `/etc/okg/packagelist` 中以下面的语法自定义：

```packagelist
@name1 pkg1 pkg2 pkg3
@name2 pkg1 pkg2 pkg3
......
```

